(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(22)},16:function(e,t,a){},18:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(8),s=a.n(i),r=(a(16),a(6)),l=a(1),c=a(2),A=a(4),h=a(3),u=a(5),d=(a(18),function(e){function t(){return Object(l.a)(this,t),Object(A.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.element,t=e.walls,a=e.isPony,n=e.isDomokun,i=e.isExit,s=e.isExitPath,r={},l=["element"];for(var c in t)l.push(t[c]);a&&l.push("pony"),n&&l.push("domokun"),s&&l.push("exitPath"),i&&l.push("exit");var A=70/this.props.element.height;return r.height=A+"vmin",r.width=A+"vmin",o.a.createElement("div",{className:"b--blue "+l.join(" "),style:r})}}]),t}(n.Component)),m=function(e){function t(){return Object(l.a)(this,t),Object(A.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},this.props.walls.map(function(e){return o.a.createElement(d,{key:e.key,element:e})}))}}]),t}(n.Component),p=a(9),f=a.n(p),y={ArrowUp:"north",ArrowDown:"south",ArrowLeft:"west",ArrowRight:"east"},g=["north","south","west","east"],v={root:"https://ponychallenge.trustpilot.com",create:"https://ponychallenge.trustpilot.com/pony-challenge/maze",maze:"https://ponychallenge.trustpilot.com/pony-challenge/maze/"},k={south:"north",north:"south",east:"west",west:"east"},w=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(A.a)(this,Object(h.a)(t).call(this))).createMaze=function(t){var a=e.state,n=a.newWidth,o=a.newHeight;fetch(v.create,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({"maze-width":Number(n),"maze-height":Number(o),"maze-player-name":"Fluttershy",difficulty:e.state.difficulty})}).then(function(e){return e.json()}).then(function(t){e.setState({mazeId:t.maze_id,backgroundUrl:"",active:!0,auto:!1},e.refreshMaze),console.log("maze id : ",t.maze_id)}).catch(function(e){return console.log(e)})},e.refreshMaze=function(){""!==e.state.mazeId&&fetch(v.maze+e.state.mazeId).then(function(e){return e.json()}).then(function(t){e.setState({walls:t.data,width:t.size[0],height:t.size[1],pony:t.pony[0],domokun:t.domokun[0],exit:t["end-point"][0]},e.findPath)})},e.findPath=function(){var t=e.state,a=t.pony,n=t.exit;e.createPath(a,void 0,[a],n,[])},e.autoPlay=function(){e.state.auto?e.setState({auto:!1}):e.setState({auto:!0},e.movePony)},e.movePony=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.state,n=a.directions,o=a.active,i=a.pony;if(o){if(""===t&&(t=n[0],e.isDomokunAhead())){console.log("warning ! domokun ahead !");var s=e.getAvailableDirections(i);t=g.filter(function(e){return!s.includes(e)})[0]}fetch(v.maze+e.state.mazeId,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:t})}).then(function(e){return e.json()}).then(function(t){"active"!==t.state?e.setState({backgroundUrl:v.root+t["hidden-url"],active:!1,auto:!1},e.refreshMaze):e.refreshMaze()})}},e.moveKey=function(t){t.key in y&&e.setState({auto:!1},e.movePony(y[t.key]))},e.createPath=function(t,a,n,o,i){var s=e.state,l=s.auto,c=s.active,A=e.getAvailableDirections(t);for(var h in t===o&&(l&&c?e.setState({exitPath:n,directions:i},e.movePony):e.setState({exitPath:n,directions:i})),A)if(void 0===a||A[h]!==k[a]){var u=e.getNextPosition(t,A[h]);if(!n.includes(u)){var d=[],m=[];d.push.apply(d,Object(r.a)(n)),d.push(u),m.push.apply(m,Object(r.a)(i)),m.push(A[h]),e.createPath(u,A[h],d,o,m)}}},e.getAvailableDirections=function(t){var a=e.state.walls,n=new Set(g),o=e.coordinates(t);for(var i in 0===o[0]&&n.delete("north"),0===o[1]&&n.delete("west"),a[t])n.delete(a[t][i]);return e.isSouthWall(o)&&n.delete("south"),e.IsEastWall(o)&&n.delete("east"),Array.from(n)},e.isSouthWall=function(t){var a=e.state,n=a.walls,o=a.height;return t[0]===o-1||!!n[e.coordinatesToIndex([t[0]+1,t[1]])].includes("north")},e.IsEastWall=function(t){var a=e.state,n=a.walls,o=a.width;return t[1]===o-1||!!n[e.coordinatesToIndex([t[0],t[1]+1])].includes("west")},e.coordinates=function(t){var a=e.state.width;return[Math.floor(t/a),t%a]},e.coordinatesToIndex=function(t){var a=e.state.width;return t[0]*a+t[1]},e.isDomokunAhead=function(){var t=e.state,a=t.domokun,n=t.exitPath,o=n.indexOf(a);if(o>-1&&o<3)return!0;var i=e.coordinates(n[1]),s=[];return s.push(e.coordinatesToIndex([i[0]-1,i[1]])),s.push(e.coordinatesToIndex([i[0]+1,i[1]])),s.push(e.coordinatesToIndex([i[0],i[1]-1])),s.push(e.coordinatesToIndex([i[0],i[1]+1])),!!s.includes(a)},e.getNextPosition=function(t,a){var n=e.coordinates(t);switch(a){case"north":return e.coordinatesToIndex([n[0]-1,n[1]]);case"south":return e.coordinatesToIndex([n[0]+1,n[1]]);case"east":return e.coordinatesToIndex([n[0],n[1]+1]);case"west":return e.coordinatesToIndex([n[0],n[1]-1]);default:return n}},e.onLevelChange=function(t){e.setState({difficulty:Number(t.target.value)})},e.onIdChange=function(t){e.setState({mazeId:t.target.value})},e.onDimChange=function(t){"width"===t.target.id&&e.setState({newWidth:t.target.value}),"height"===t.target.id&&e.setState({newHeight:t.target.value})},e.state={mazeId:"",width:0,height:0,walls:[],pony:0,domokun:0,exit:0,exitPath:[],directions:[],backgroundUrl:"",active:!0,newWidth:15,newHeight:15,auto:!1,difficulty:5},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("keyup",this.moveKey)}},{key:"render",value:function(){var e,t=[],a=0,n=0,i=this.state.height,s=this.state.width;for(e=0;e<i;e++){var r=[];for(a=0;a<s;a++){var l={};l.key=n,l.walls=this.state.walls[n],l.isPony=n===this.state.pony,l.isDomokun=n===this.state.domokun,l.isExit=n===this.state.exit,l.isExitPath=!!this.state.exitPath.includes(n),l.height=this.state.height,e===i-1&&l.walls.push("south"),a===s-1&&l.walls.push("east"),r.push(l),n++}t.push(r)}return o.a.createElement("div",null,o.a.createElement("header",{className:"bg-black-50 w-100 ph4-m ph5-l pa2"},o.a.createElement("nav",{className:"f6 tracked"},o.a.createElement("div",{className:"measure pr3"},o.a.createElement("label",{htmlFor:"difficulty",className:"select-label db mb2 pr1 normal"},"Difficulty : ",o.a.createElement("strong",null," ",this.state.difficulty)," "),o.a.createElement("input",{id:"difficulty",type:"range",name:"points",min:"0",max:"10",defaultValue:"5",onChange:this.onLevelChange})),o.a.createElement("div",{className:"measure pr3"},o.a.createElement("label",{htmlFor:"width",className:"select-label db mb2 pr1"},"Width : ",this.state.newWidth),o.a.createElement("input",{id:"width",type:"range",name:"points",min:"15",max:"25",defaultValue:"15",step:"5",onChange:this.onDimChange})),o.a.createElement("div",{className:"measure pr3"},o.a.createElement("label",{htmlFor:"height",className:"select-label db mb2 pr1"},"Height : ",this.state.newHeight),o.a.createElement("input",{id:"height",type:"range",name:"points",min:"15",max:"25",defaultValue:"15",step:"5",onChange:this.onDimChange})),o.a.createElement("div",null,o.a.createElement("button",{className:"f6 link dim br2 ph3 pv1 mr2 mb2 mt2 dib white buttons",onClick:this.createMaze},"Create Maze"),o.a.createElement("button",{className:"f6 link dim br2 ph3 pv1 mb2 mr2 mt2 dib white buttons",id:"autoplay",onClick:this.autoPlay}," Auto play")),o.a.createElement("label",null,o.a.createElement("span",{className:"normal black-60 "},"Use ",o.a.createElement("img",{className:"key-img",src:f.a,alt:"arrows",height:"35rem"})," to move the pony or click autoplay !")))),o.a.createElement("div",{className:"container pa4 flex-auto",style:{backgroundImage:"url(".concat(this.state.backgroundUrl,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain"}},t.map(function(e,t){return o.a.createElement(m,{key:t,walls:e})})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(20);s.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t){e.exports="data:image/png;base64,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"}},[[10,2,1]]]);
//# sourceMappingURL=main.1540f7b4.chunk.js.map